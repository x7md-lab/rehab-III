---
import Layout from '@/layouts/Layout.astro';
import Header from '@/components/Header.astro';
import Hero from '@/components/Hero.astro';
import About from '@/components/About.astro';
import Gallery from '@/components/Gallery.astro';
import Vision from '@/components/Vision.astro';
import Services from '@/components/Services.astro';
import Values from '@/components/Values.astro';
import Footer from '@/components/Footer.astro';
import { defineWebPage, defineLocalBusiness } from '@unhead/schema-org';
import { ui } from '@/i18n/ui';

const t = ui.en;
const isRtl = false;

const schemaNodes = [
    defineWebPage({
        name: 'Welcome to Rehab - English',
        description: 'This page is in English.',
        inLanguage: 'en'
    }),
    defineLocalBusiness({
        name: 'Rehab Services and Marketing Co. Ltd.',
        image: '/logowhte.svg',
        priceRange: '$$',
        address: {
            streetAddress: 'Al Jaroushi Mall',
            addressLocality: 'Makkah',
            addressCountry: 'SA'
        },
        makesOffer: [
            { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Catering and Subsistence" } },
            { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Contracting and Preparations" } },
            { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Management and Operation" } },
            { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Logistics Services" } },
            { "@type": "Offer", "itemOffered": { "@type": "Service", "name": "Technical and Operational Consulting" } }
        ]
    })
];
---

<Layout title="Rehab" schemaNodes={schemaNodes}>
    <Header />
    <main class="space-y-8 md:space-y-12 pb-20">
        <Hero />
        
        <!-- Smart Grid Layout for Content Sections -->
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 auto-rows-fr">
                <!-- Row 1: About & Gallery -->
                <About />
                <Gallery />
                
                <!-- Row 2: Mission & Vision -->
                <!-- Mission Section (Inline Card) -->
                <div id="mission" class="h-full flex flex-col justify-center bg-black/30 backdrop-blur-xl rounded-3xl p-8 md:p-12 border border-white/10" data-aos="fade-up">
                    <div class="text-center md:text-start" dir="ltr">
                        <h2 class="text-3xl md:text-4xl font-bold mb-8 text-white">{t['mission.title']}</h2>
                        <div class="h-1 w-24 bg-gold mx-auto md:mx-0 mb-8 rounded-full"></div>
                        <p class="text-xl md:text-2xl leading-relaxed mb-4 text-gray-100">
                            {t['mission.text1']}
                        </p>
                        <p class="text-xl md:text-2xl leading-relaxed text-gray-100">
                            {t['mission.text2']}
                        </p>
                    </div>
                </div>

                <Vision />
            </div>
        </div>

        <Values />
        <Services />
    </main>
    <Footer />
</Layout>

<script>
  const savedLang = localStorage.getItem('rehab-lang-preference');
  if (savedLang === 'ar') {
    window.location.href = '/';
  }
</script>
